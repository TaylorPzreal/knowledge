---
title: "7th"
# weight: 1
# bookFlatSection: false
# bookToc: true
# bookHidden: false
# bookCollapseSection: false
# bookComments: false
# bookSearchExclude: false
---

# 第七篇

Review
1. 2019/09/24

好的API会把更新数据的函数与指示读取数据的函数清晰分开。

## 一、将查询函数和修改函数分离（Seprate Query from Modifier）
任何有返回值的函数，都不应该有看得到的副作用。

## 二、函数参数化（Parameterize Function）
发现两个函数逻辑非常相似，只有一些字面量值不同，可以将其合并成一个函数，一参数的形式传入不同的值。

## 三、移除标记参数（Remove Flag Argument）

标记参数是指，调用者用它来指示被调函数应该执行那一部分逻辑。
如果调用者传入的是程序中流动的数据，这参数不算标记参数；
只有调用者直接传入字面量值，是标记参数。
只有参数值影响了函数内部的控制流，才是标记参数。

## 四、保持对象完整（Preserve Whole Object）
“传递整个记录”的方式能更好滴应对变化，如果将来被调用的函数需要从记录中导出更多的数据，就不用为此修改参数列表。

## 五、以查询取代参数（Replace Parameter with Query）
如果想要去除的参数值只需要向另一个参数查询就能得到。

## 六、以参数取代查询（Repalce Query with Parameter）
纯函数应用场景

## 七、移除设值函数（Remove Setting Method）
如果为某个字段提供了设值函数，这就暗示这个字段可以被修改。如果不希望对象创建之后此字段还有机会被修改，那就不要为他提供设值函数。

## 八、以工厂函数取代构造函数（Replace Constructor with Factory Function）
构造函数专门用于对象的初始化。
局限
- 无法根据环境或参数信息返回子类实例或代理对象
- 构造函数的名字是固定的，因此无法使用比默认名称更清晰的函数名
- 构造函数总是要使用new操作符调用
工厂函数就不受这些限制，内部实现可以调用构造函数，也可以换成别的方式实现。

类型码：函数的参数以字符串字面量的形式传入类型码，一般来说都是坏味道。

## 九、以命令取代函数（Replace Function with Command）
函数，不管是独立函数，还是以方法形式附着在对象上的函数，是程序设计的基本构造块。
将函数封装成对象，也是一种有用的办法，称之为“命令对象”（command object），即类

优点
- 设置命令的参数值，从而支持更丰富的生命周期管理能力
- 借助继承和钩子对函数行为加以定制
- 嵌套函数

命令对象为处理复杂计算提供了强大的机制，借助命令对象，可以轻松底将原本复杂的函数拆解为多个方法，彼此之间通过字段共享状态；拆解后的方法可以分别调用；开始调用之前的数据状态也可以逐步构建。

## 十、以函数取代命令（Replace Command with Function）
大多时候，我只是想调用一个函数，这个函数并不复杂。
类似于React设计，能用function就不要用class声明组件。

